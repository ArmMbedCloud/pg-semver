name: CI/CD
on: [push]
jobs:
  test:
    strategy:
      matrix:
        pg: [ 12, 11, 10, 9.6, 9.5, 9.4, 9.3, 9.2 ]
    name: üêò PostgreSQL ${{ matrix.pg }}
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - name: Setup Postgres
        run: |
          wget https://gist.githubusercontent.com/petere/5893799/raw/apt.postgresql.org.sh
          wget https://gist.githubusercontent.com/petere/6023944/raw/pg-travis-test.sh
          sudo sh ./apt.postgresql.org.sh
          sudo rm -vf /etc/apt/sources.list.d/pgdg-source.list

      - name: Build and Test
        env:
          PGVERSION: ${{ matrix.pg }}
        run: bash ./pg-travis-test.sh
